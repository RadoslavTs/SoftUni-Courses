<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Numeralis</title>

      <script defer src="https://pyscript.net/alpha/pyscript.js"></script>

      <!-- bootstrap for styling , Pyscript can also be used for styling instead of bootstrap -->
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

      <!-- roboto font -->
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

      <style>
         body {
         font-family:roboto;
         background-color: #fcfcfc;
         padding-top: 55px;
         min-height: 100vh;
         margin:0;
         display:flex;
         flex-direction:column;
         text-align: center;
         }
      </style>
   </head>

   <body>

      <div class="container">
         <h1 class="text-center">
            <img src="https://i.ibb.co/kS7jzCR/numeralis-logo-4.png">
         </h1>
         <h1 class="text-center">
         Numeral Systems Converter
         </h1>
         <br />
         <p>
            <h4>Number to convert:</h4>
            <input id="number_to_convert" type="text" class="form-control text-center" aria-label="Large" aria-describedby="inputGroup-sizing-sm" placeholder="Enter number" />
         <p>
         </p>
         <select id="conversionType" name="conversionType">
            <option value="binary_decimal">Binary to Decimal</option>
            <option value="binary_hexadecimal">Binary to Hexadecimal</option>
            <option value="decimal_binary">Decimal to Binary</option>
            <option value="decimal_hexadecimal">Decimal to Hexadecimal</option>
            <option value="hexadecimal_binary">Hexadecimal to Binary</option>
            <option value="hexadecimal_decimal">Hexadecimal to Decimal</option>
         </select>
         <p></p>
         <button id="convert" type="submit"  class="btn btn-primary text-center" pys-onClick="final_result">Convert number</button>
         <p></p>
         <h4>Explanation:</h4>
         <textarea id="explanation" class="form-control text-center" rows="2" aria-label="Large" aria-describedby="inputGroup-sizing-sm" disabled ></textarea>
         <p></p>

            <h4>Result:</h4>
            <textarea id="result" class="form-control text-center" rows="2" aria-label="Large" aria-describedby="inputGroup-sizing-sm" disabled></textarea>
         <p>
         </p>
      </div>
      <py-script>



         def binary_decimal(initial_value):
            decimal_result = int()
            explanation_string_one = ""
            explanation_string_two = ""
            final_explanation = explanation_string_one + explanation_string_two
            for sequence in range(1, len(initial_value)+1):
                temp_digit = int(initial_value[sequence-1])
                temp_power = len(initial_value) - sequence
                temp_multiplier = 2 ** (len(initial_value) - sequence)
                temp_number = temp_digit * temp_multiplier
                decimal_result += temp_number
                explanation_string_one += f"({temp_digit} x 2^{temp_power}) + "
                explanation_string_two += f"{temp_number} + "
            explanation_string_one = explanation_string_one[:-3]
            explanation_string_two = explanation_string_two[:-3]
            pyscript.write("explanation", f"Binary number: {initial_value} = {explanation_string_one} = {explanation_string_two}")
            pyscript.write("result", f"The decimal representation of {initial_value} is {decimal_result}")


         def binary_hexadecimal(initial_value):
            starting_number = initial_value
            resulting_number = ""
            binary_dict = {"0000": "0", "0001": "1", "0010": "2", "0011": "3", "0100": "4", "0101": "5", "0110": "6", "0111": "7",
               "1000": "8", "1001": "9", "1010": "A", "1011": "B", "1100": "C", "1101": "D", "1110": "E", "1111": "F"}
            counter = 1
            explanation_string_one = ""
            explanation_string_two = ""
            while starting_number:
               current_number = starting_number[-4:]
               if len(current_number) == 4:
                  resulting_number += binary_dict[current_number]
               else:
                  if len(current_number) == 3:
                     current_number = "0" + current_number
                  elif len(current_number) == 2:
                     current_number = "00" + current_number
                  elif len(current_number) == 1:
                     current_number = "000" + current_number
                  resulting_number += binary_dict[current_number]
               if explanation_string_one:
                  explanation_string_one = current_number + " " + explanation_string_one
                  explanation_string_two = binary_dict[current_number] + "    " + explanation_string_two
               else:
                  explanation_string_one = current_number
                  explanation_string_two = binary_dict[current_number]
               counter += 1
               starting_number = starting_number[:-4]
            resulting_number = resulting_number[::-1]
            pyscript.write("explanation", f"Binary digits:               {explanation_string_one}\n Hexadecimal digits:    {explanation_string_two}")
            pyscript.write("result", f"The hexadecimal representation of {initial_value} is {resulting_number}")


         def final_result(initial_value):
            pyscript.write("explanation", "")
            pyscript.write("result", "")
            initial_value = str(Element("number_to_convert").element.value)
            conversion_type = Element("conversionType").element.value
            if conversion_type == "binary_decimal":
               binary_decimal(initial_value)
            elif conversion_type == "binary_hexadecimal":
               binary_hexadecimal(initial_value)


      </py-script>
   </body>

</html>